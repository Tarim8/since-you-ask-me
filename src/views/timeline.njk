{% extends 'layout.njk' %}

{% from './components/page-heading/macro.njk' import pageHeading %}

{% set synonyms = [
  'educational',
  'elucidative',
  'enlightening',
  'informative',
  'illuminating',
  'revelatory'
] %}

{% block content %}
  {% call pageHeading({ sortChronologically: sortChronologically }) %}
    Well, since you ask me {{ topic }}
    <span class="subject">{{ subject | safe }}</span>‚Ä¶
  {% endcall %}
  <p class="i-believe-text">
    I believe I do have a series of events that you might find {{ synonyms | random }}.
  </p>
  <header class="timeline-ordering">
    {% if sortChronologically %}
      <div class="timeline-ordering-option">
        <a href="?in-broadcast-order"><span class="sr-only">Switch to </span>Broadcast order</a>
      </div>
      <div class="timeline-ordering-option">
        <span class="active"><span class="sr-only">Currently in </span>Chronological order</span>
      </div>
    {% else %}
      <div class="timeline-ordering-option">
        <span class="active"><span class="sr-only">Currently in </span>Broadcast order</span>
      </div>
      <div class="timeline-ordering-option">
        <a href="?starting-from-the-beginning"><span class="sr-only">Switch to </span>Chronological order</a>
      </div>
    {% endif %}
  </header>
  <ol class="timeline">
    {% for event in events %}
      <li style="animation-delay: {{ loop.index0 * 200 }}ms;">
        <h2>
          {{ event.year }} ‚Äì {{ event.location }}
        </h2>
        <div class="episode-link">
          {% if activeTag === '+' + event.episode %}
            <span class="active-tag">Episode {{ event.episode }}</span>,
          {% else %}
            <a href="/what-happened-in/episode-{{ event.episode }}{{ '?starting-from-the-beginning' if sortChronologically }}">Episode {{ event.episode }}</a>,
          {% endif %}
          Scene {{ event.scene }}
        </div>
        {% for paragraph in event.description %}
          <p>
            {{ paragraph | withLinks(activeTag, sortChronologically) }}
          </p>
        {% endfor %}
      </li>
    {% endfor %}
    <li style="animation-delay: {{ (events | length) * 200 }}ms;">
      <div class="timeline-ball" aria-hidden="true"></div>
      <h2>
        ‚ö†Ô∏è Work in progress!
      </h2>
      <p>
        This website is still under construction. Please check back in a week or so. üôÇ
      </p>
    </li>
  </ol>
{% endblock %}
